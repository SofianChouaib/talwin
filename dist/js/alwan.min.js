!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Alwan",[],e):"object"==typeof exports?exports.Alwan=e():t.Alwan=e()}(self,(function(){return function(){"use strict";var t={d:function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Dt}});const r="alwan",n="alwan__container",a="alwan__swatch",l="alwan__preset-button",o="alwan--collapse",s=document,i=s.documentElement,u="button",p="open",h="close",_="color",d="click",c="pointerdown",g="keydown",w="input",f="change",v="focusin",m="hex",b="rgb",y="hsl",x="hsv",A="--lw-color",L=[m,b,y],H="afterbegin",V=t=>"string"==typeof t,S=t=>t.trim(),$=()=>{let t=[],e=(t,e,r,n=!0)=>{e.forEach((e=>{t[(n?"add":"remove")+"EventListener"](e,r)}))};return{t(r,n,a){V(n)&&(n=[n]),t.push([r,n,a]),e(r,n,a)},i(){t.forEach((([t,r,n])=>{e(t,r,n,!1)})),t=[]}}},{keys:M,assign:O,setPrototypeOf:j,prototype:k}=Object,B=(t,e)=>{let r=M(t);for(const n of r)e(t[n],n)},C=(t,...e)=>O(t,...e),I=(t,e)=>!(!t||!e)&&M(t).every((r=>t[r]===e[r])),z=t=>null!=t,E=()=>s.body,F=(t,e=s,r=!1)=>V(t)&&S(t)?e["querySelector"+(r?"All":"")](t):t instanceof Element?t:null,D=(t,e,r)=>{if(t&&e)return e.insertAdjacentElement(r||"beforeend",t)},P=(t,e)=>{t.innerHTML=e},R=(t,e,r,n,a)=>{const l=s.createElement(t||"div");return e&&(l.className=e),B(n||{},((t,e)=>{"html"===e?P(l,t):t&&l.setAttribute(e,t)})),r&&D(l,r,a),l},T=t=>t===s?{x:0,y:0,top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:t.getBoundingClientRect(),Z=t=>t.parentElement,q=(t,e)=>(Z(e).replaceChild(t,e),t),G=t=>{t&&t.remove()},K=(t,e=[s])=>(t=Z(t))&&t!==s.body?(/auto|scroll/.test(getComputedStyle(t).overflow)&&e.push(t),K(t,e)):e,N=(t,e,r)=>{t&&z(r)&&t.style.setProperty(e,r)},U=(t,e=!0)=>{t.style.display=e?"":"none"},J=(t,e,r)=>{e&&t.classList.toggle(e,r)},Q=(t,e,r,n)=>R(u,"alwan__button "+t,e,C({type:u},r),n),W=(t,e,r)=>{t.style.transform=`translate(${e}px,${r}px)`},X=(t,e,r,n)=>R(w,"alwan__slider "+t,e,{type:"range",max:r,step:n}),{parseFloat:Y,parseInt:tt,isFinite:et}=Number,{min:rt,max:nt,abs:at,round:lt,PI:ot}=Math,st=(t,e=100,r=0)=>rt(nt(t,r),e),it=t=>(lt(t)%360+360)%360,ut="top",pt="bottom",ht="right",_t="left",dt="start",ct="center",gt="end",wt={x:"width",y:"height"},ft={x:ht,y:pt},vt=(t,e,r)=>{let n,a,l,o=$(),i=t=>{var e;n.u()&&(a.p(),e=a._,l.every((t=>{let{x:r,y:n,bottom:a,right:l}=T(e),{x:o,y:s,bottom:i,right:u}=T(t);return n<i&&a>s&&r<u&&l>o}))||n.m(!0))},u=r=>{if(n.u()){let a,l,{target:o,key:s,shiftKey:i}=r,u=e.H.L.A;"Escape"===s?n.m():"Tab"===s&&(l=[...F("button,input",t,!0)].pop(),o!==n.A||i?(i&&o===u||!i&&o===l)&&(a=n.A):a=u,a&&(r.preventDefault(),a.focus()))}};return{V:t,S(r,p=e){e=p;let{theme:h,popover:_,target:d,position:c,margin:w,id:f,toggle:v,shared:m,disabled:b}=r,y=F(d);V(f)&&!m&&(t.id=f),m&&(v=!0),B(e.H,(({$:t})=>{t&&t(r,e)})),n=e._,d=y||n.A,t.dataset.theme=h,v||n.M(!0),U(n.A,_||v),J(t,"alwan--popup",_),o.i(),a=null,_?(a=((t,e,{O:r,j:n})=>{let a,l={[ut]:[ut,pt,ht,_t],[pt]:[pt,ut,ht,_t],[ht]:[ht,_t,ut,pt],[_t]:[_t,ht,ut,pt]},o={start:[dt,ct,gt],center:[ct,dt,gt],end:[gt,ct,dt]},i=5,[u,p]=V(n)?n.split("-"):[];return l[u]||(u=pt),p?o[p]||(p=dt):p=ct,r=Y(r),et(r)&&(i=r),{_:t,p(){let r=T(s),n=T(t),h=T(e);a={x:null,y:null},l[u].some((t=>{let e=t===ut||t===pt?"y":"x",l=r[t],s=n[t],u=i+h[wt[e]];if(u<=at(l-s))return a[e]=s+(l?i:-u),e="x"===e?"y":"x",o[p].some((t=>{let l=h[wt[e]],{[e]:o,[ft[e]]:s}=n,i=r[ft[e]]-o,u=(l+n[wt[e]])/2;return t===dt&&l<=i?(a[e]=o,!0):t===ct&&u<=s&&u<=i?(a[e]=s-u,!0):t===gt&&l<=s?(a[e]=s-l,!0):void 0})),!0})),B(a,((t,e)=>{null===t&&(a[e]=(r[ft[e]]-h[wt[e]])/2)})),W(e,a.x,a.y)}}})(d,t,{O:w,j:c}),a.p(),l=K(d),o.t(window,"resize",i),l.forEach((t=>{o.t(t,"scroll",i)})),o.t(s,g,u)):(t.style="",D(t,d,!y&&"afterend")),n.k(b)},B(){a&&a.p()},C:()=>e,I(){r.i(),o.i(),t=G(t),e={}}}},mt='<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg>',bt=(t,e,r)=>{let n="",a="",l=t.a;return e===y&&(n="%"),l<1&&!r&&(e+="a",a=", "+l),`${e}(${t[e[0]]}, ${t[e[1]]+n}, ${t[e[2]]+n+a})`},yt=(t,e,r)=>255*(r-r*e*nt(0,rt(t,4-t,1))),xt=t=>(t<16?"0":"")+t.toString(16),At=({r:t,g:e,b:r,a:n})=>"#"+xt(t)+xt(e)+xt(r)+(n<1?xt(lt(255*n)):""),Lt=({h:t,s:e,v:r,a:n})=>{let a=r*(1-e/2);return{h:t,s:lt(100*(a&&1!==a?(r-a)/rt(a,1-a):0)),l:lt(100*a),a:lt(100*n)/100}},Ht=R("canvas").getContext("2d"),Vt=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?\s*[\s,]\s*([+-]?\d*\.?\d+)%?\s*,?\s*([+-]?\d*\.?\d+)%?(?:\s*[\/,]\s*([+-]?\d*\.?\d+)(%)?)?\s*\)?$/,St=/^#[0-9a-f]{6}$/i,$t={deg:1,turn:360,rad:180/ot,grad:.9},Mt=(t="",e)=>{let r,n,a="";V(t)?a=S(t):(n=[b,y,x].find((e=>e.split("").every((e=>et(Y(t[e])))))),n&&(z(t.a)||(t.a=1),n===x&&(n=b,t=HSVToRGB({h:it(t.h),s:st(t.s)/100,v:st(t.v)/100,a:t.a})),a=bt(t,n)));let[l,o,s,i,u,p,h]=Vt.exec(a)||[];if(l)r={h:it(o*($t[s]?$t[s]:1)),s:st(i),l:st(u),a:z(p)?st(h?p/100:p,1):1},n=y;else if(n=b,Ht.fillStyle="#000",Ht.fillStyle=a,a=Ht.fillStyle,St.test(a))r={r:tt((_=a).slice(1,3),16),g:tt(_.slice(3,5),16),b:tt(_.slice(5,7),16),a:1};else{let[t,e,n,l]=/\((.+)\)/.exec(a)[1].split(",").map((t=>Y(t)));r={r:t,g:e,b:n,a:l}}var _;return e?bt(r,n):{F:n,D:r}};let Ot=null,jt=0;const kt=t=>{const e=$(),l=R("",r,E()),u=vt(l,t,e),p=((t,e,r)=>{let n,a,l,o,i=!1;const u=R("","alwan__palette",t,{tabindex:"0"}),p=R("","alwan__marker",u),{width:h,height:d}=T(u),w={ArrowRight:1,ArrowLeft:-1},v={ArrowDown:1,ArrowUp:-1},m=(t,r,l)=>{t=st(t,h),r=st(r,d),t===n&&r===a||(n=t,a=r,W(p,n,a),e.D.p({s:n/h,v:1-a/d}),e.R.P(_,u),l&&l())};return r.t(u,c,(r=>{o||(o=R("","alwan__overlay",t)),e.D.T(),l=T(u),i=!0,m(r.clientX-l.x,r.clientY-l.y),u.focus()})),r.t(s,"pointermove",(t=>{i&&m(t.clientX-l.x,t.clientY-l.y)})),r.t(s,"pointerup",(t=>{i&&(e.D.Z(u),o=G(o),i=!1)})),r.t(u,g,(t=>{let r=t.key;(w[r]||v[r])&&(t.preventDefault(),m(n+(w[r]||0)*h/100,a+(v[r]||0)*d/100,(()=>{e.R.P(f,u)})))})),{A:u,$(t,r){e=r||e},p({s:t,v:e}){W(p,t*h,(1-e)*d)}}})(l,t,e),h=R("",n,l),b=((t,e,r)=>{let n,a,l;const o={$({preview:r,copy:l},o){e=o,l!==!!a&&(a=l?Q("alwan__copy-button",n||t,{html:mt},H):G(a)),r!==!!n&&(n=r?R("","alwan__preview",t,!1,H):G(n),D(a,n||t,H))}};return r.t(t,d,(({target:t})=>{if(t===a&&!l&&!e.config.disabled){let t,r=navigator.clipboard,n=e.D.q(!0);r?r.writeText(n):(t=R(w,"",i,{value:n}),t.select(),s.execCommand("copy"),t=G(t)),l=!0,P(a,'<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path></svg>')}})),r.t(t,["mouseout","focusout"],(t=>{t.target===a&&(l&&(l=!1,P(a,mt)),a.blur())})),o})(h,t,e),y=((t,e,r)=>{let n;const a=R("","alwan__sliders",t),l=X("alwan__slider--hue",a,360);return r.t(a,[w,f],(({target:t,type:r,target:{value:n}})=>{e.D.p(t===l?{h:360-n}:{a:1*n}),e.R.P(r===f?f:_,t)})),{$({opacity:t},r){e=r||e,t!==!!n&&(t?n=X("alwan__slider--alpha",a,1,.01):(n=G(n),e.D.p({a:1})))},G({h:t,a:e}){l.value=360-t,n&&(n.value=e)}}})(h,t,e),x=((t,e,r)=>{let n,a,l,o,s=[],i=!1;const u={$({inputs:r,format:o},i){e=i||e,s=L.filter((t=>r[t]));let u=s.length;u?(n||(n=R("","alwan__inputs",t)),1===u?a=G(a):a||(a=Q("",t,{html:'<svg width="15" height="15" viewBox="0 0 20 20" aria-role="none"><path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path></svg>'})),l=nt(s.indexOf(o),0),o=s[l],p(o)):(n=G(n),a=G(a),o=L.includes(o)?o:L[0]),e.config.format=o,U(t,u)},G(t){B(o,((e,r)=>{e.value=V(t)?t:t[r]}))}},p=t=>{let r,{singleInput:a,opacity:l}=e.config;r=a||t===m?[t]:(t+(l?"a":"")).split(""),P(n,""),o={},r.forEach((t=>{const e=R("label","",n);o[t]=R(w,"alwan__input",e,{type:"text"}),R("span","",e,{html:t})}))};return r.t(t,d,(t=>{t.target===a&&(l=(l+1)%s.length,e.config.format=s[l],p(s[l]),e.D.p())})),r.t(t,w,(({target:{value:t}})=>{i||(e.D.T(),i=!0);let r="",n={},a=s[l];e.config.singleInput||a===m?r=t:(B(o,((t,e)=>{n[e]=S(t.value)})),r=bt(n,a)),e.D.K(r,!0)&&e.R.P(_,o)})),r.t(t,f,(t=>{i&&(e.D.Z(o),i=!1)})),r.t(t,[g,v],(({target:t,key:r,type:n})=>{t!==a&&(n===v?t.select():"Enter"===r&&e._.m())})),u})(R("",n,l),t,e),M=((t,e,r)=>{let n,l,s,i,u;const p={$(r={},p){e=p||e,l=r.swatches||l,u=r.toggleSwatches,u=!!z(u)&&u,Array.isArray(l)&&(i=l.length,i?(n?P(n,""):n=R("","alwan__swatches",t),l.forEach((t=>{N(Q(a,n),A,Mt(t,!0))})),u?s||(s=Q("alwan__collapse-button",t,{html:'<svg width="20" height="20" viewBox="0 0 24 24" aria-role="none"><path d="M6.984 14.016l5.016-5.016 5.016 5.016h-10.031z"></path></svg>'})):s=G(s),J(n,o,u)):(n=G(n),s=G(s)))},N(t){i=l.push(t),i>1?N(Q(a,n),A,Mt(t,!0)):p.$()},U(t){let e=l.findIndex(((e,r)=>t===e||tt(t)===r));e>-1&&(i--,G(n.children[e]),l.splice(e,1),i||p.$())}};return r.t(t,d,(({target:t})=>{t===s?J(n,o):Z(t)===n&&(e.D.K(t.style.getPropertyValue(A)),e.R.P(_,t),e.R.P(f,t))})),p})(l,t,e);return{J:u,L:p,W:b,X:y,Y:x,tt:M}},Bt=t=>!!Ot&&t===Ot,Ct=t=>{if(Bt(t)){if(jt--,jt>0)return;Ot=null}t.J.I(),t={}},It=(t,e,r)=>{let n=t.H.J,a=n.C();a!==t&&(Bt(a.H)&&a._.m(!0),r&&n.S(e,t))},zt=t=>{let e,r,n,a={h:0,s:0,v:0,a:1},l=t.config,o=(t,e,r,n)=>C((e+(l.opacity?"a":"")).split("").reduce(((e,n,a)=>(e[r?a:n]=t[n],e)),r?[]:{}),e!==x?{toString:()=>n||bt(t,e)}:{}),s={p(n,o,i){let{J:{V:u},Y:p}=t.H;l.disabled||(C(a,n=n||a),e=o||(({h:t,s:e,v:r,a:n})=>({r:lt(yt((5+(t/=60))%6,e,r)),g:lt(yt((3+t)%6,e,r)),b:lt(yt((1+t)%6,e,r)),a:n}))(a),r=bt(e,b),N(t._.A,A,r),N(u,"--h",n.h),N(u,"--rgb",bt(e,b,!0)),N(u,A,r),i||p.G(s.q(l.singleInput)))},et(e,r,n){let{L:l,X:o}=t.H;s.p(e,r,n),l.p(a),o.G(a)},q:(t,n=l.format)=>n===b?t?r:e:n===y?t?bt(Lt(a),y):Lt(a):n===m?At(e):"",T(){n=s.q()},Z(e){I(n,s.q())||t.R.P(f,e)},K(t,e=!1){let{F:r,D:n}=Mt(t),a=!I(n,s.q(!1,r)),l=r===b;return a&&s.et(l?(({r:t,g:e,b:r,a:n})=>{let a=nt(t/=255,e/=255,r/=255),l=a-rt(t,e,r);return{h:it(60*(0===l?0:a===t?(e-r)/l%6:a===e?(r-t)/l+2:a===r?(t-e)/l+4:0)),s:a?l/a:0,v:a,a:lt(100*n)/100}})(n):(({h:t,s:e,l:r,a:n})=>{let a=(r/=100)+(e/=100)*rt(r,1-r);return{h:t,s:a?2*(1-r/a):0,v:a,a:n}})(n),!!l&&n,e),a},rt:()=>({value:s.q(!0),hsv:t=>o(a,x,t),rgb:t=>o(e,b,t,r),hsl:t=>o(Lt(a),y,t),hex:()=>At(e)})};return s},Et=(t,e={})=>{let r=C(t.config,e),n=e.color,{K:a,p:l}=t.D;t.H=(t=>{let{H:e,config:{shared:r}}=t;if(e){if(Bt(e)===r)return e;t._.m(!0,!0),Ct(e)}return r?(Ot||(Ot=kt(t)),jt++,Ot):kt(t)})(t),t._.$(r),It(t),t.H.J.S(r,t),z(n)?a(n):l()},Ft={id:"",classname:"",theme:"light",toggle:!0,popover:!0,position:"bottom-start",margin:8,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:{rgb:!0,hex:!0,hsl:!0},opacity:!0,preview:!0,copy:!0,swatches:[],shared:!1,toggleSwatches:!1};class Dt{static version="1.0.5";static defaults=Ft;constructor(t,e){let r=this;r.config=C({},Dt.defaults),r.R=(t=>{const e={[p]:[],[h]:[],[f]:[],[_]:[]};return{P(r,n){t.config.disabled||(e[r]||[]).forEach((e=>{e(C({type:r,source:n},t.D.rt()))}))},nt(t,r){e[t]&&!e[t].includes(r)&&e[t].push(r)},lt(t,r){let n=t&&e[t];z(t)?n&&(z(r)?e[t]=n.filter((t=>t!==r)):e[t]=[]):B(e,((t,r)=>{e[r]=[]}))}}})(r),r.D=zt(r),r._=((t,e)=>{let r=!1,n=[];const a=$(),o=E(),i=F(t),u=o.contains(i)&&i!==o?i:null,_=e.config,d={A:u||Q(l,o),$({preset:t,classname:e}){let r=d.A;u&&t!==(u!==r)&&(r=t?q(Q(l,null,{id:u.id}),u):q(u,r)),(!u||t&&V(e))&&(w(r,n,!1),n=e.split(/\s+/),w(r,n)),d.A=r},u:()=>r,M(t){r||_.disabled||(It(e,_,!0),e.D.et(),e.H.J.B(),g(!0,t))},m(t,e){r&&(_.shared||_.toggle||e)&&g(!1,t)},ot(){r?d.m():d.M()},k(t){_.disabled=t,t?d.m(!0,!0):_.toggle||d.M(!0),d.A.disabled=t},I(){u?d.$({preset:!1}):d.A=G(d.A),a.i()}},g=(t,n)=>{J(e.H.J.V,"alwan--open",t),r=t,n||e.R.P(t?p:h,d.A)},w=(t,e,r=!0)=>{e.forEach((e=>{J(t,e,r)}))};return a.t(s,c,(({target:t})=>{t===d.A?d.ot():r&&_.popover&&!e.H.J.V.contains(t)&&d.m()})),d})(t,r),Et(r,e)}setOptions(t){Et(this,t)}isOpen(){return this._.u()}open(){this._.M()}close(){this._.m()}toggle(){this._.ot()}on(t,e){this.R.nt(t,e)}off(t,e){this.R.lt(t,e)}setColor(t){return this.D.K(t),this}getColor(){return this.D.rt()}addSwatch(t){this.H.tt.N(t)}removeSwatch(t){this.H.tt.U(t)}enable(){this._.k(!1)}disable(){this._.k(!0)}reset(){this.D.K(this.config.default)}reposition(){this.H.J.B()}trigger(t){this.R.P(t)}destroy(){let t=this;t._.I(),Ct(t.H),B(t,((e,r)=>{delete t[r]})),j(t,k)}}return e=e.default}()}));
//# sourceMappingURL=alwan.min.js.map