!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Alwan",[],e):"object"==typeof exports?exports.Alwan=e():t.Alwan=e()}(self,(function(){return function(){"use strict";var t={d:function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Ft}});const r="alwan",n="alwan__container",a="alwan__swatch",l="alwan__preset-button",o="alwan--collapse",s=document,i=s.documentElement,h="button",u="open",p="close",_="color",d="click",c="pointerdown",g="keydown",f="input",w="change",v="focusin",m="hex",b="rgb",y="hsl",x="hsv",A="--lw-color",L=[m,b,y],H="afterbegin",V=t=>"string"==typeof t,$=t=>t.trim(),M=()=>{let t=[],e=(t,e,r,n=!0)=>{e.forEach((e=>{t[(n?"add":"remove")+"EventListener"](e,r)}))};return{t(r,n,a){V(n)&&(n=[n]),t.push([r,n,a]),e(r,n,a)},i(){t.forEach((([t,r,n])=>{e(t,r,n,!1)})),t=[]}}},{parseFloat:O,parseInt:S,isFinite:j}=Number,{min:k,max:B,abs:C,round:z,PI:E}=Math,I=(t,e=100,r=0)=>k(B(t,r),e),F=t=>(z(t)%360+360)%360,{keys:D,assign:P,setPrototypeOf:Z,prototype:q}=Object,K=(t,e)=>{let r=D(t);for(const n of r)e(t[n],n)},N=(t,e)=>!(!t||!e)&&D(t).every((r=>t[r]===e[r])),R=t=>null!=t,T=()=>s.body,U=(t,e=s,r=!1)=>V(t)&&$(t)?e["querySelector"+(r?"All":"")](t):t instanceof Element?t:null,G=(t,e,r)=>{if(t&&e)return e.insertAdjacentElement(r||"beforeend",t)},J=(t,e)=>{t.innerHTML=e},Q=(t,e,r,n,a)=>{const l=s.createElement(t||"div");return e&&(l.className=e),K(n||{},((t,e)=>{"html"===e?J(l,t):t&&l.setAttribute(e,t)})),r&&G(l,r,a),l},W=t=>t===s?{x:0,y:0,top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:t.getBoundingClientRect(),X=t=>t.parentElement,Y=(t,e)=>(X(e).replaceChild(t,e),t),tt=t=>{t&&t.remove()},et=(t,e=[s])=>(t=X(t))&&t!==s.body?(/auto|scroll/.test(getComputedStyle(t).overflow)&&e.push(t),et(t,e)):e,rt=(t,e,r)=>{t&&R(r)&&t.style.setProperty(e,r)},nt=(t,e=!0)=>{t.style.display=e?"":"none"},at=(t,e,r)=>{V(e)&&(e=[e]),e.forEach((e=>{e&&t.classList.toggle(e,r)}))},lt=(t,e,r,n)=>Q(h,"alwan__button "+t,e,P({type:h},r),n),ot=(t,e,r)=>{t.style.transform=`translate(${z(e)}px,${z(r)}px)`},st=(t,e,r,n)=>Q(f,"alwan__slider "+t,e,{type:"range",max:r,step:n}),it="top",ht="bottom",ut="right",pt="left",_t="start",dt="center",ct="end",gt={x:"width",y:"height"},ft={x:ut,y:ht},wt=(t,e,r)=>{let n,a,l,o=M(),i=!1;const h=(r,i=e)=>{e=i;let{theme:h,popover:u,target:p,position:w,margin:v,id:m,toggle:b,shared:y}=r,x=U(p);V(m)&&!y&&(t.id=m),K(e.u,(({p:t})=>{t&&t(r,e)})),n=e.m._,p=x||n,t.dataset.theme=h,b||y||f(e,!0,!0),nt(n,u||b||y),at(t,"alwan--popup",u),o.i(),a=null,u?(a=((t,e,{A:r,L:n})=>{let a,l={[it]:[it,ht,ut,pt],[ht]:[ht,it,ut,pt],[ut]:[ut,pt,it,ht],[pt]:[pt,ut,it,ht]},o={start:[_t,dt,ct],center:[dt,_t,ct],end:[ct,dt,_t]},i=5,[h,u]=V(n)?n.split("-"):[];return l[h]||(h=ht),u?o[u]||(u=_t):u=dt,r=O(r),j(r)&&(i=r),{m:t,H(){let r=W(s),n=W(t),p=W(e);a={x:null,y:null},l[h].some((t=>{let e=t===it||t===ht?"y":"x",l=r[t],s=n[t],h=i+p[gt[e]];if(h<=C(l-s))return a[e]=s+(l?i:-h),e="x"===e?"y":"x",o[u].some((t=>{let l=p[gt[e]],{[e]:o,[ft[e]]:s}=n,i=r[ft[e]]-o,h=(l+n[gt[e]])/2;return t===_t&&l<=i?(a[e]=o,!0):t===dt&&h<=s&&h<=i?(a[e]=s-h,!0):t===ct&&l<=s?(a[e]=s-l,!0):void 0})),!0})),K(a,((t,e)=>{null===t&&(a[e]=(r[ft[e]]-p[gt[e]])/2)})),ot(e,a.x,a.y)}}})(p,t,{A:v,L:w}),a.H(),l=et(p),o.t(window,"resize",_),l.forEach((t=>{o.t(t,"scroll",_)})),o.t(s,[g,c],d)):(t.style="",G(t,p,!x&&"afterend"))},_=t=>{var r;i&&(a.H(),r=a.m,l.every((t=>{let{x:e,y:n,bottom:a,right:l}=W(r),{x:o,y:s,bottom:i,right:h}=W(t);return n<i&&a>s&&e<h&&l>o}))||f(e,!1))},d=r=>{if(i){let a,l,{target:o,key:s,shiftKey:i}=r,h=e.u.V._;"Escape"===s||o!==n&&!t.contains(o)&&![...n.labels||[]].some((t=>t.contains(o)))?f(e,!1):"Tab"===s&&(l=[...U("button,input",t,!0)].pop(),o!==n||i?(i&&o===h||!i&&o===l)&&(a=n):a=h,a&&(r.preventDefault(),a.focus()))}},f=(r,n,a)=>{r=r||e;let{shared:l,toggle:o,disabled:s}=r.config;s&&!a||(R(n)||(i&&r!==e&&f(e,!1),n=!i),n!==i&&(l||o||a)&&(n&&(r!==e&&h(r.config,r),e.M.$(),w()),r===e&&(i=n,at(t,"alwan--open",n),e.S.O(n?u:p,t))))},w=()=>{a&&a.H()};return{j:t,k:h,B:w,C:f,I:()=>i,F:()=>{r.i(),o.i(),t=tt(t),e={}}}},vt='<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg>',mt=(t,e,r)=>{let n="",a="",l=t.a;return e===y&&(n="%"),l<1&&!r&&(e+="a",a=", "+l),`${e}(${t[e[0]]}, ${t[e[1]]+n}, ${t[e[2]]+n+a})`},bt=(t,e,r)=>255*(r-r*e*B(0,k(t,4-t,1))),yt=({h:t,s:e,v:r,a:n})=>({r:z(bt((5+(t/=60))%6,e,r)),g:z(bt((3+t)%6,e,r)),b:z(bt((1+t)%6,e,r)),a:n}),xt=t=>(t<16?"0":"")+t.toString(16),At=({r:t,g:e,b:r,a:n})=>"#"+xt(t)+xt(e)+xt(r)+(n<1?xt(z(255*n)):""),Lt=({h:t,s:e,v:r,a:n})=>({h:t,s:z(100*((e=r*(1-e/2))&&1!==e?(r-e)/k(e,1-e):0)),l:z(100*e),a:z(100*n)/100}),Ht=Q("canvas").getContext("2d"),Vt=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?\s*[\s,]\s*([+-]?\d*\.?\d+)%?\s*,?\s*([+-]?\d*\.?\d+)%?(?:\s*[\/,]\s*([+-]?\d*\.?\d+)(%)?)?\s*\)?$/,$t=/^#[0-9a-f]{6}$/i,Mt={deg:1,turn:360,rad:180/E,grad:.9},Ot=(t="",e)=>{let r,n,a="";V(t)?a=$(t):(n=[b,y,x].find((e=>e.split("").every((e=>j(O(t[e])))))),n&&(R(t.a)||(t.a=1),n===x&&(n=b,t=yt({h:F(t.h),s:I(t.s)/100,v:I(t.v)/100,a:t.a})),a=mt(t,n)));let[l,o,s,i,h,u,p]=Vt.exec(a)||[];if(l)r={h:F(o*(Mt[s]?Mt[s]:1)),s:I(i),l:I(h),a:R(u)?I(p?u/100:u,1):1},n=y;else if(n=b,Ht.fillStyle="#000",Ht.fillStyle=a,a=Ht.fillStyle,$t.test(a))r={r:S((_=a).slice(1,3),16),g:S(_.slice(3,5),16),b:S(_.slice(5,7),16),a:1};else{let[t,e,n,l]=/\((.+)\)/.exec(a)[1].split(",").map((t=>O(t)));r={r:t,g:e,b:n,a:l}}var _;return e?mt(r,n):{D:n,M:r}};let St=null,jt=0;const kt=t=>{const e=M(),l=Q("",r,T()),h=wt(l,t,e),u=((t,e,r)=>{let n,a,l,o,i=!1;const h=Q("","alwan__palette",t,{tabindex:"0"}),u=Q("","alwan__marker",h),{width:p,height:d}=W(h),f={ArrowRight:1,ArrowLeft:-1},v={ArrowDown:1,ArrowUp:-1},m=(t,r,l)=>{t=I(t,p),r=I(r,d),t===n&&r===a||(n=t,a=r,ot(u,n,a),e.M.H({s:n/p,v:1-a/d}),e.S.O(_,h),l&&l())};return r.t(h,c,(r=>{o||(o=Q("","alwan__overlay",t)),e.M.P(),l=W(h),i=!0,m(r.clientX-l.x,r.clientY-l.y),h.focus()})),r.t(s,"pointermove",(t=>{i&&m(t.clientX-l.x,t.clientY-l.y)})),r.t(s,"pointerup",(t=>{i&&(e.M.Z(h),o=tt(o),i=!1)})),r.t(h,g,(t=>{let r=t.key;(f[r]||v[r])&&(t.preventDefault(),m(n+(f[r]||0)*p/100,a+(v[r]||0)*d/100,(()=>{e.S.O(w,h)})))})),{_:h,p(t,r){e=r||e},H({s:t,v:e}){ot(u,t*p,(1-e)*d)}}})(l,t,e),p=Q("",n,l),b=((t,e,r)=>{let n,a,l;const o={p({preview:r,copy:l},o){e=o,l!==!!a&&(a=l?lt("alwan__copy-button",n||t,{html:vt},H):tt(a)),r!==!!n&&(n=r?Q("","alwan__preview",t,!1,H):tt(n),G(a,n||t,H))}};return r.t(t,d,(({target:t})=>{if(t===a&&!l&&!e.config.disabled){let t,r=navigator.clipboard,n=e.M.q(!0);r?r.writeText(n):(t=Q(f,"",i,{value:n}),t.select(),s.execCommand("copy"),t=tt(t)),l=!0,J(a,'<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path></svg>')}})),r.t(t,["mouseout","focusout"],(t=>{t.target===a&&(l&&(l=!1,J(a,vt)),a.blur())})),o})(p,t,e),y=((t,e,r)=>{let n;const a=Q("","alwan__sliders",t),l=st("alwan__slider--hue",a,360);return r.t(a,[f,w],(({target:t,type:r,target:{value:n}})=>{e.M.H(t===l?{h:360-n}:{a:1*n}),e.S.O(r===w?w:_,t)})),{p({opacity:t},r){e=r||e,t!==!!n&&(t?n=st("alwan__slider--alpha",a,1,.01):(n=tt(n),e.M.H({a:1})))},K({h:t,a:e}){l.value=360-t,n&&(n.value=e)}}})(p,t,e),x=((t,e,r)=>{let n,a,l,o,s=[],i=!1;const h={p({inputs:r,format:i},h){e=h||e,r=R(r)?r:{},o={},s=L.filter((t=>r[t]));let p=s.length;p?(n||(n=Q("","alwan__inputs",t)),1===p?a=tt(a):a||(a=lt("",t,{html:'<svg width="15" height="15" viewBox="0 0 20 20" aria-role="none"><path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path></svg>'})),l=B(s.indexOf(i),0),i=s[l],u(i)):(n=tt(n),a=tt(a),i=L.includes(i)?i:L[0]),e.config.format=i,nt(t,p)},K(t){K(o,((e,r)=>{e.value=V(t)?t:t[r]}))}},u=t=>{let r,{singleInput:a,opacity:l}=e.config;r=a||t===m?[t]:(t+(l?"a":"")).split(""),J(n,""),r.forEach((t=>{const e=Q("label","",n);o[t]=Q(f,"alwan__input",e,{type:"text"}),Q("span","",e,{html:t})}))};return r.t(t,d,(t=>{t.target===a&&(l=(l+1)%s.length,e.config.format=s[l],u(s[l]),e.M.H())})),r.t(t,f,(({target:{value:t}})=>{i||(e.M.P(),i=!0);let r="",n={},a=s[l];e.config.singleInput||a===m?r=t:(K(o,((t,e)=>{n[e]=$(t.value)})),r=mt(n,a)),e.M.N(r,!0)&&e.S.O(_,o)})),r.t(t,w,(t=>{i&&(e.M.Z(o),i=!1)})),r.t(t,[g,v],(({target:t,key:r,type:n})=>{t!==a&&(n===v?t.select():"Enter"===r&&e.close())})),h})(Q("",n,l),t,e),O=((t,e,r)=>{let n,l,s,i,h;const u={p(r={},u){e=u||e,l=r.swatches||l,h=r.toggleSwatches,h=!!R(h)&&h,Array.isArray(l)&&(i=l.length,i?(n?J(n,""):n=Q("","alwan__swatches",t),l.forEach((t=>{rt(lt(a,n),A,Ot(t,!0))})),h?s||(s=lt("alwan__collapse-button",t,{html:'<svg width="20" height="20" viewBox="0 0 24 24" aria-role="none"><path d="M6.984 14.016l5.016-5.016 5.016 5.016h-10.031z"></path></svg>'})):s=tt(s),at(n,o,h)):(n=tt(n),s=tt(s)))},R(t){i=l.push(t),i>1?rt(lt(a,n),A,Ot(t,!0)):u.p()},T(t){let e=l.findIndex(((e,r)=>t===e||S(t)===r));e>-1&&(i--,tt(n.children[e]),l.splice(e,1),i||u.p())}};return r.t(t,d,(({target:t})=>{t===s?at(n,o):X(t)===n&&(e.M.N(t.style.getPropertyValue(A)),e.S.O(_,t),e.S.O(w,t))})),u})(l,t,e);return{U:h,V:u,G:b,J:y,W:x,X:O}},Bt=t=>!!St&&t===St,Ct=t=>{if(Bt(t)){if(jt--,jt>0)return;St=null}t.U.F(),t={}},zt=t=>{let e,r,n,a={h:0,s:0,v:0,a:1},l=t.config,o=(t,e,r,n)=>P((e+(l.opacity?"a":"")).split("").reduce(((e,n,a)=>(e[r?a:n]=t[n],e)),r?[]:{}),e!==x?{toString:()=>n||mt(t,e)}:{}),s={H(n,o,i){let{U:{j:h},W:u}=t.u;l.disabled||(P(a,n=n||a),e=o||yt(a),r=mt(e,b),rt(t.m._,A,r),rt(h,"--h",n.h),rt(h,"--rgb",mt(e,b,!0)),rt(h,A,r),i||u.K(s.q(l.singleInput)))},$(e,r,n){let{V:l,J:o}=t.u;s.H(e,r,n),l.H(a),o.K(a)},q:(t,n=l.format)=>n===b?t?r:e:n===y?t?mt(Lt(a),y):Lt(a):n===m?At(e):"",P(){n=s.q()},Z(e){N(n,s.q())||t.S.O(w,e)},N(t,e=!1){let{D:r,M:n}=Ot(t),a=!N(n,s.q(!1,r)),l=r===b;return a&&s.$(l?(({r:t,g:e,b:r,a:n})=>{let a=B(t/=255,e/=255,r/=255),l=a-k(t,e,r);return{h:F(60*(0===l?0:a===t?(e-r)/l%6:a===e?(r-t)/l+2:a===r?(t-e)/l+4:0)),s:a?l/a:0,v:a,a:z(100*n)/100}})(n):(({h:t,s:e,l:r,a:n})=>({h:t,s:(e=(r/=100)+e*k(r,1-r)/100)?2*(1-r/e):0,v:e,a:n}))(n),!!l&&n,e),a},Y:()=>({value:s.q(!0),hsv:t=>o(a,x,t),rgb:t=>o(e,b,t,r),hsl:t=>o(Lt(a),y,t),hex:()=>At(e)})};return s},Et=(t,e)=>{e=e||{};let r,n=P(t.config,e),{color:a,disabled:l}=e,{N:o,H:s}=t.M;t.u=(t=>{let{u:e,config:{shared:r}}=t;if(e){if(Bt(e)===r)return e;e.U.C(t,!1,!0),Ct(e)}return r?(St||(St=kt(t)),jt++,St):kt(t)})(t),t.m.p(n),r=t.u.U,Bt(t.u)&&r.C(null,!1),r.k(n,t),t.m.tt(l),R(a)&&o(a),s()},It={id:"",classname:"",theme:"light",toggle:!0,popover:!0,position:"bottom-start",margin:8,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:{rgb:!0,hex:!0,hsl:!0},opacity:!0,preview:!0,copy:!0,swatches:[],shared:!1,toggleSwatches:!1};class Ft{static version="1.1.1";static defaults=It;constructor(t,e){let r=this;r.config=P({},Ft.defaults),r.S=(t=>{const e={[u]:[],[p]:[],[w]:[],[_]:[]};return{O(r,n){t.config.disabled||(e[r]||[]).forEach((e=>{e(P({type:r,source:n},t.M.Y()))}))},et(t,r){e[t]&&!e[t].includes(r)&&e[t].push(r)},rt(t,r){let n=t&&e[t];R(t)?n&&(R(r)?e[t]=n.filter((t=>t!==r)):e[t]=[]):K(e,((t,r)=>{e[r]=[]}))}}})(r),r.M=zt(r),r.m=((t,e)=>{let r=[];const n=M(),a=T(),o=U(t),s=a.contains(o)&&o!==a?o:null,i={_:s||lt(l,a),p({preset:t,classname:a}){let o=i._;s&&t!==(s!==o)&&(n.i(),o=t?Y(lt(l,null,{id:s.id}),s):Y(s,o),n.t(o,d,(t=>{e.u.U.C(e)}))),(!s||t&&V(a))&&(at(o,r,!1),r=a.split(/\s+/),at(o,r,!0)),i._=o},tt(t){if(R(t)){let{config:r,u:n}=e,{shared:a,toggle:l}=r,o=n.U.C;r.disabled=i._.disabled=!!t,t?o(e,!1,!0):a||l||o(e,!0,!0)}},F(){s?i.p({preset:!1}):i._=tt(i._),n.i()}};return i})(t,r),Et(r,e)}setOptions(t){Et(this,t)}isOpen(){return this.u.U.I()}open(){this.u.U.C(this,!0)}close(){this.u.U.C(this,!1)}toggle(){this.u.U.C(this)}on(t,e){this.S.et(t,e)}off(t,e){this.S.rt(t,e)}setColor(t){return this.M.N(t),this}getColor(){return this.M.Y()}addSwatch(t){this.u.X.R(t)}removeSwatch(t){this.u.X.T(t)}enable(){this.m.tt(!1)}disable(){this.m.tt(!0)}reset(){this.M.N(this.config.default)}reposition(){this.u.U.B()}trigger(t){this.S.O(t)}destroy(){let t=this;t.m.F(),Ct(t.u),K(t,((e,r)=>{delete t[r]})),Z(t,q)}}return e=e.default}()}));
//# sourceMappingURL=alwan.min.js.map